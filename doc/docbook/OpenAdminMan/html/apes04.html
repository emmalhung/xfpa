<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.4. Changes to Allied Model Source Code</title><link rel="stylesheet" href="fpa-style.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.69.1" /><link rel="start" href="index.html" title="Forecast Production Assistant Version 8" /><link rel="up" href="ape.html" title="Appendix E. Adding New Allied Models" /><link rel="prev" href="apes03.html" title="E.3. The Local Configuration File" /><link rel="next" href="apes05.html" title="E.5. FPA Specialized Processing Modules" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">E.4. Changes to Allied Model Source Code</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apes03.html">Prev</a> </td><th width="60%" align="center">Appendix E. Adding New Allied Models</th><td width="20%" align="right"> <a accesskey="n" href="apes05.html">Next</a></td></tr></table><hr /></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2054755"></a>E.4. Changes to Allied Model Source Code</h2></div></div></div><p>
<a id="id2054761" class="indexterm"></a>
The code for the Allied Model itself is treated as much like a 'black box' as possible.
The requirements are that the application is run as an independent program with all input and output to named files, and executed by a run string such as:
</p><pre class="programlisting"><span xmlns="" class="replaceable">model_executable full_pathname_of_aliasfile</span></pre><p>
File information is passed to the application through the use of an aliasfile (usually created by the specialized pre-processing module), identified by a <span xmlns="" class="replaceable">file_alias_name</span> of 'aliases' in the 'files' declaration in the 'Sources' block of the Local Configuration file.
The aliasfile is a table of file aliases and full pathnames for all input and output files used by the application.
Most file aliases and pathnames are constructed directly from each <span xmlns="" class="replaceable">file_alias_name</span> section in the 'files' declaration.
</p><p>
Some code must be added to the Allied Model itself to access the aliasfile.
Code for accessing Fortran routines is found in FTN_alias.f in the <span class="acronym">FPA</span> Source Code.
Routine FTN_MODEL_SETUP() is called at the start of the application to read the aliasfile for the aliases and pathnames.
All files within the application are then identified by alias, with files being opened by calls to the routine FTN_MODEL_FILE_OPEN(), and all Logical Unit numbers for Fortran reads are also cross-referenced to the aliases.
</p><p>
Files that must be created for running the application can be produced through the pre-processing module or through an initialization module, which are both described below.
</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apes03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ape.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apes05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.3. The Local Configuration File </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.5. <span class="acronym">FPA</span> Specialized Processing Modules</td></tr></table></div></body></html>
