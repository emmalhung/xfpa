<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>B.4. Field Modifiers</title><link rel="stylesheet" href="fpa-style.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.69.1" /><link rel="start" href="index.html" title="Forecast Production Assistant Version 8" /><link rel="up" href="apb.html" title="Appendix B. Equation Evaluator" /><link rel="prev" href="apbs03.html" title="B.3. Equation Functions" /><link rel="next" href="apbs05.html" title="B.5. Generic Equations" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">B.4. Field Modifiers</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apbs03.html">Prev</a> </td><th width="60%" align="center">Appendix B. Equation Evaluator</th><td width="20%" align="right"> <a accesskey="n" href="apbs05.html">Next</a></td></tr></table><hr /></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2045197"></a>B.4. Field Modifiers</h2></div></div></div><p>
<a id="id2045203" class="indexterm"></a>
 A field in the <span class="acronym">FPA</span> is defined as an element at a given level for a given valid time that comes from a given source at a given run time.
 If a given field has an equation, then the level, valid time, source, and run time for all fields in the equation are assumed to be the same as for field that is being calculated, unless these parameters are explicitly modified.
 </p><p>
 Modifiers for fields are identified by the field name followed by angle brackets, that is, name&lt;<span xmlns="" class="replaceable">modifier(s)</span>&gt;  Modifiers within the brackets are strings separated by commas ','.
 </p><p>
 The  <span><strong class="command">$upper</strong></span>  and  <span><strong class="command">$lower</strong></span>  modifiers are "magic" modifiers, to set the level of a field from the upper or lower levels of a layer.

 </p><div xmlns="" class="example"><a xmlns="http://www.w3.org/1999/xhtml" id="id2045241"></a><p xmlns="http://www.w3.org/1999/xhtml" class="title"><b>Example B.2. field level modifier from a layer type field</b></p><p xmlns="http://www.w3.org/1999/xhtml">
 An equation for an 850 to 1000 mb field containing the field  <span><strong class="command">height&lt;$upper&gt;</strong></span>  would use the 850 mb height to evaluate the equation.
 </p></div><p>
 </p><p>
 Modifiers which begin with  <span><strong class="command">@</strong></span>  or  <span><strong class="command">!</strong></span>  are "magic" field or modifier substitutions described in the Generic Equations section below.
 </p><p>
 Modifiers are first checked against the list of known levels. If the modifier matches a level in the <span class="acronym">FPA</span> configuration files, then the equation evaluator resets the level.
 </p><p>
 For all other modifiers, the first letter of the modifier string identifies the parameter that will be modified.
 </p><p>
 Modifiers which begin with  <span><strong class="command">v</strong></span>  are used to reset valid time.</p><p>
 Modifiers which begin with  <span><strong class="command">m</strong></span>  are used to reset source.</p><p>
 Modifiers which begin with  <span><strong class="command">r</strong></span>  are used to reset run time.</p><p>
 Modifiers which begin with  <span><strong class="command">u</strong></span>  or  <span><strong class="command">l</strong></span>  are used to reset the upper or lower level for a layer type field.</p><p>
 </p><div xmlns="" class="example"><a xmlns="http://www.w3.org/1999/xhtml" id="id2065907"></a><p xmlns="http://www.w3.org/1999/xhtml" class="title"><b>Example B.3. level modifier with model and valid time</b></p><p xmlns="http://www.w3.org/1999/xhtml">The modifier <span><strong class="command">height&lt;850,mGEM,v-06&gt;</strong></span> resets level to 850mb, the source to the GEM model, and the valid time to 6 hours before the current valid time.</p></div><p>
 Values can also be extracted from the attribute of a discrete, wind, line or scattered field, as long as the attribute can be converted to a numeric value or use a lookup table to convert the attribute to a numeric value. The <span><strong class="command">a</strong></span> modifier must be used to identify the attribute to be evaluated. The following are the modifiers that are used by attributes.
 </p><p>
 Modifiers which begin with  <span><strong class="command">a</strong></span> are used to set the field attribute.</p><p>
 Modifiers which begin with  <span><strong class="command">b</strong></span> are used to set the units for the field attribute (default is MKS).</p><p>
 Modifiers which begin with  <span><strong class="command">x</strong></span> are used to set the name of a lookup table for converting the field attribute value to a numeric value. The default directory for a lookup file is in <code class="filename">config/lookups</code>. The lookup file contains lines with a keyword to match against the extracted field attribute, and a numeric value to use if the match is successful. A line containing the keyword <span><strong class="command">*missing*</strong></span> can be used to identify a numeric value to use if the field attribute is not found. A line containing the keyword <span><strong class="command">*default*</strong></span> can be used to identify a numeric value to use if the field attribute does not match any of the keywords.</p><p>
 Modifiers that begin with  <span><strong class="command">d</strong></span> are used to set the default field attribute value (default 0.0).</p><p>
 Modifiers that begin with  <span><strong class="command">p</strong></span> are used to set the proximity to a feature for using the attribute value (default 0.0).</p><p>
 Modifiers that begin with  <span><strong class="command">q</strong></span> are used to set the units for proximity (default is km).</p><div xmlns="" class="table"><a xmlns="http://www.w3.org/1999/xhtml" id="id2066005"></a><p xmlns="http://www.w3.org/1999/xhtml" class="title"><b>Table B.2. Field modifiers</b></p><table xmlns="http://www.w3.org/1999/xhtml" summary="Field modifiers" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Modifier</th><th>Meaning</th></tr></thead><tbody><tr><td>@ !</td><td>"magic" for substitution in Generic Equations</td></tr><tr><td><span xmlns="" class="replaceable">level</span></td><td>reset level to <span xmlns="" class="replaceable">level</span></td></tr><tr><td>$upper or $lower</td><td>reset level from the upper or lower levels of a layer</td></tr><tr><td>u <span xmlns="" class="replaceable">level</span></td><td>reset upper level of a layer to <span xmlns="" class="replaceable">level</span></td></tr><tr><td>l <span xmlns="" class="replaceable">level</span></td><td>reset lower level of a layer to <span xmlns="" class="replaceable">level</span></td></tr><tr><td>v <span xmlns="" class="replaceable">hrs</span></td><td>reset valid time to run time plus number of <span xmlns="" class="replaceable">hrs</span></td></tr><tr><td>v+<span xmlns="" class="replaceable">hrs</span> or v-<span xmlns="" class="replaceable">hrs</span></td><td>reset valid time by plus or minus number of <span xmlns="" class="replaceable">hrs</span></td></tr><tr><td>v previous</td><td>reset valid time to next earliest time (if it exists)</td></tr><tr><td>v <span xmlns="" class="replaceable">timestamp</span></td><td>reset valid time to <span xmlns="" class="replaceable">timestamp</span> (in FPA timestamp format of year:julian day:hour or year:julian day:hour:minutes)</td></tr><tr><td><p>m <span xmlns="" class="replaceable">source</span></p>
 <p>or</p>
 <p>m <span xmlns="" class="replaceable">source</span> <span xmlns="" class="replaceable">subsource</span></p></td><td>reset source or source and subsource to <span xmlns="" class="replaceable">source</span> or <span xmlns="" class="replaceable">source</span> and <span xmlns="" class="replaceable">subsource</span></td></tr><tr><td>r+<span xmlns="" class="replaceable">hrs</span> or r-<span xmlns="" class="replaceable">hrs</span></td><td>reset run time by plus or minus number of <span xmlns="" class="replaceable">hrs</span></td></tr><tr><td>r current</td><td>reset run time to most recent run time of model</td></tr><tr><td>r previous</td><td>reset run time to next most recent run time of model</td></tr><tr><td>r <span xmlns="" class="replaceable">timestamp</span></td><td>reset run time to <span xmlns="" class="replaceable">timestamp</span> (in FPA timestamp format of year:julian day:hour or year:julian day:hour:minutes)</td></tr><tr><td>a <span xmlns="" class="replaceable">field attribute</span></td><td>set field attribute</td></tr><tr><td>b <span xmlns="" class="replaceable">units</span></td><td>set units for field attribute</td></tr><tr><td>x <span xmlns="" class="replaceable">lookup</span></td><td>set lookup table for field attribute conversion to numeric value</td></tr><tr><td>d <span xmlns="" class="replaceable">value</span></td><td>set default value for field attribute</td></tr><tr><td>p <span xmlns="" class="replaceable">value</span></td><td>set proximity value for field attribute to use</td></tr><tr><td>q <span xmlns="" class="replaceable">units</span></td><td>set units for proximity</td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apbs03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="apb.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apbs05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">B.3. Equation Functions </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> B.5. Generic Equations</td></tr></table></div></body></html>
